#top命令
* 格式: pidstat option time count  
  * option：
  ````
    -u 默认的参数，显示各个进程的CPU使用统计
    -r 显示各个进程的内存使用统计
    -d 显示各个进程的IO使用情况
    -p 指定进程号
    -w 显示每个进程的上下文切换情况
    -t 显示选择任务的线程的统计信息外的额外信息
    -T { TASK | CHILD | ALL }
    这个选项指定了pidstat监控的。TASK表示报告独立的task，CHILD关键字表示报告进程下所有线程统计信息。ALL表示报告独立的task和task下面的所有线程。
    注意：task和子线程的全局的统计信息和pidstat选项无关。这些统计信息不会对应到当前的统计间隔，这些统计信息只有在子线程kill或者完成的时候才会被收集。
    -V：版本号
    -h：在一行上显示了所有活动，这样其他程序可以容易解析。
    -I：在SMP环境，表示任务的CPU使用率/内核数量
    -l：显示命令名和所有参数
 
  ````
##命令示例
* pidstat  
##系统状态
````
Linux 4.19.162-1.el7.centos.x86_64 (0-hfq-institution-testd.app.local)  12/15/2020      _x86_64_        (40 CPU)

06:19:19 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command
06:19:19 PM     0         1    0.00    0.00    0.00    0.00     4  sh
06:19:19 PM     0        66    0.25    0.03    0.00    0.29     6  glusterfs
06:19:19 PM    28        82    0.00    0.00    0.00    0.00     2  nscd
06:19:19 PM   502        90    0.51    1.04    0.00    1.55    10  java
===============================================================================
UID：用户ID
PID：进程ID
%usr：进程在用户空间占用CPU的百分比
%system：进程在内核空间占用CPU的百分比
%guest：任务花费在虚拟机上的CPU使用率（运行在虚拟处理器）
%CPU：任务总的CPU使用率
CPU：正在运行这个任务的处理器编号
Command：这个任务的命令名称
````
* pidstat -r -p 90 
````
06:24:12 PM   UID       PID  minflt/s  majflt/s     VSZ    RSS   %MEM  Command
06:24:12 PM   502        90      6.81      0.00 22405428 1024700   0.78  java
===============================================================================
minflt/s：从内存中加载数据时每秒出现的次要错误的数目，这些不要求从磁盘载入内存页面
majflt/s：从内存中加载数据时每秒出现的主要错误的数目，这些要求从磁盘载入内存页面
VSZ：虚拟地址大小，虚拟内存的使用KB
RSS：长期内存使用，任务的不可交换物理内存的使用量KB
%MEM：进程使用的物理内存百分比，top命令也会输出该字段
````
* pidstat -d -p 90 1 5
````
06:26:43 PM   UID       PID   kB_rd/s   kB_wr/s kB_ccwr/s  Command
06:26:44 PM   502        90      0.00      0.00      0.00  java
06:26:45 PM   502        90      0.00      0.00      0.00  java
06:26:46 PM   502        90      0.00      0.00      0.00  java
06:26:47 PM   502        90      0.00      0.00      0.00  java
06:26:48 PM   502        90      0.00      0.00      0.00  java
Average:      502        90      0.00      0.00      0.00  java
===============================================================================
kB_rd/s：进程每秒从磁盘读取的数据量(以kB为单位)
kB_wr/s：进程每秒向磁盘写入的数据量(以kB为单位)
kB_ccwr/s：任务写入磁盘被取消的速率（KB）；当任务截断脏的pagecache的时候会发生。
````
* pidstat -t -p 90 
````
06:28:50 PM   UID      TGID       TID    %usr %system  %guest    %CPU   CPU  Command
06:28:50 PM   502        90         -    0.51    1.04    0.00    1.55    10  java
06:28:50 PM   502         -        90    0.00    0.00    0.00    0.00    10  |__java
06:28:50 PM   502         -        97    0.00    0.00    0.00    0.00     1  |__java
06:28:50 PM   502         -        98    0.00    0.00    0.00    0.00     7  |__java
===============================================================================
TGID：主线程的标识线程组ID，也就是线程组leader的进程ID，等于pid。
TID：线程ID
````
* pidstat -T ALL -p 90 
````
06:34:24 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command
06:34:24 PM   502        90    0.51    1.04    0.00    1.55    10  java

06:34:24 PM   UID       PID    usr-ms system-ms  guest-ms  Command
06:34:24 PM   502        90   2650550   5431890         0  java
==========================================================================
PID:进程id
Usr-ms:任务和子线程在用户级别使用的毫秒数。
System-ms:任务和子线程在系统级别使用的毫秒数。
Guest-ms:任务和子线程在虚拟机(running a virtual processor)使用的毫秒数。
Command:命令名
````




